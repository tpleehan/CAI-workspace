<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <h2>할일 목록 만들기</h2>

  <div class="name-form">
    <h3 class="name-title"></h3>
    <input type="text" placeholder="이름을 입력하세요" class="name-input">
    <button class="btn1">확인</button>
  </div>

  <div class="todo-form">
    <input type="text" placeholder="당신의 할일을 적으세요." class="todo-input">
    <button class="btn2">확인</button>
  </div>

  <ul class="todo-list">

  </ul>

  <script>
    /**
     * 1. 이름을 입력 받아서 h3에 띄운다.
     *    이름이 입력되면 이름 입력창을 숨긴다.
     * 
     * 2. 할 일을 입력 받아서 li요소로 추가한다.
     *    입력창에 있는 글자는 비워준다.
     * 
     * 3. 할 일이 추가되면 X버튼이 같이 생성한다.
     *    X 버튼을 클릭하면 해당 할 일을 지운다.
     */

    const $btn1 = document.querySelector('.btn1');
    const $btn2 = document.querySelector('.btn2');
    
    $btn1.addEventListener('click', () => {

      const $name_input = document.querySelector('.name-input');
      const $name_title = document.querySelector('.name-title');

      $name_title.innerHTML = $name_input.value + '님 환영합니다.';
      $btn1.style.display = 'none';
      $name_input.style.display = 'none';

    });
    
    $btn2.addEventListener('click', () => {
    
      const $todo_input = document.querySelector('.todo-input');
      const $todo_list = document.querySelector('.todo-list');
      const newLi = document.createElement('li');
      const removeBtn = document.createElement('button');
      removeBtn.innerHTML = 'X';
      const li = newLi.appendChild(document.createTextNode($todo_input.value));

      $todo_list.appendChild(newLi).appendChild(removeBtn);
      $todo_input.value = null;

      removeBtn.addEventListener('click', (e) => {
        
        e.target.parentNode.remove();

        // 반복문을 사용할 필요 없이 event target으로 지우면 된다.
        // 반복문 사용시 순차적으로 자식 객체가 지워진다.
        // for (let i = 0; i <= $todo_list.children.length; i++) {
          // console.log(e.target.parentNode);
          // $todo_list.removeChild($todo_list.children[i]);
          // return;
        // }

      });

    });

    /*
    ex)
    const $name_form = document.querySelector('.name-form');
    const $btn1 = document.querySelector('.btn1');
    const $name_input = document.querySelector('.name-input');
    const $name_title = document.querySelector('.name-title');
    
    $btn1.addEventListener('click', function() {
      $name_title.textContent = $name_input.value + '님 환영합니다.';
      $name_input.style.display = 'none';
      $btn1.style.display = 'none';
    });
    
    const $todo_input = document.querySelector('.todo-input');
    const $btn2 = document.querySelector('.btn2');

    function handleTodo() {
      createTodo($todo_input.value);
      $todo_input.value = '';
    }

    function createTodo(text) {
      // li 생성
      const $li = document.createElement('li');
      $li.textContent = text;

      // 버튼 생성
      const $del_btn = document.createElement('button');
      $del_btn.textContent = 'X';

      // li에 버튼 추가
      $li.appendChild($del_btn);

      // li를 ul에 추가
      document.querySelector('.todo-list').appendChild($li);

      // 삭제 버튼 클릭 시 이벤트 발생
      $del_btn.addEventListener('click', () => {
        document.querySelector('.todo-list').removeChild($del_btn.parentNode);
      });
    }

    $btn2.addEventListener('click', handleTodo);   
    */
  </script>

</body>
</html>