package kr.co.jsp.user.service;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import kr.co.jsp.user.model.UserDAO;

public class DeleteService implements IUserService {

	@Override
	public void execute(HttpServletRequest request, HttpServletResponse response) {

		String id = ((UserVO) session.getAttribute("user")).getId();
		String pw = request.getParameter("check_pw");
		
		UserDAO.getInstance().deleteUser(id);
		
		if (dao.userCheck(id, pw) == 0) {
			<script>
				alert("비밀번호가 일치하지 않습니다.")
				location.href="user_mypage.jsp";
			</script>
		} else {
			dao.deleteUser(id);
			session.invalidate();
			<script>
				alert("회원 탈퇴가 정삭적으로 처리 되었습니다.")
				location.href="/MyWeb"
			</script>
		}
				
		
	}

}
